version: '3.8'

services:
  pwm:
    image: alpine:latest  # Use lightweight Alpine image
    restart: always
    ports:
      - "10443:10443"
      - "11443:11443"
      - "5222:5222"
      - "8801:8801"
    volumes:
      - ./pwm:/app  # Mount the host 'pwm' directory to '/app' in the container
    working_dir: /  # Root directory
    entrypoint: ["/bin/sh", "-c", "/app/docker/entrypoint.sh"]  # Define entrypoint to run the script
    networks:
      - pwm_net

networks:
  pwm_net:
    driver: bridge
    ipam:
      config:
        - subnet: 172.20.0.0/16
